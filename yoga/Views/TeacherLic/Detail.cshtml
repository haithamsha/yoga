@model TechearMemberShipTest
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="d-lg-flex">
<a asp-action="Index" asp-controller="TeacherLic">Dashboard</a>
<form method="post">
    <div asp-validation-summary="All" class="text-danger"></div>
    <input asp-for="MemId" hidden/>
    <input asp-for="TestId" hidden/>
    <div class="border p-3 mt-4">
        <h2>Teacher Licence Issue</h2>
        <ul class="nav nav-tabs">
            <li class="nav-item">
                <a class="nav-link active" data-bs-toggle="tab" href="#home">Expreience </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#profile">Basic Information</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#fees">Fees</a>
            </li>

            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#status">Status</a>
            </li>

        </ul>
        <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade active show" id="home">
                <div class="mb-3">
                    <label class="fw-bold" asp-for="@Model.TechearMemberShip.Name"></label>
                    <div>
                        <label>@Model.TechearMemberShip.AppUser.FirstName @Model.TechearMemberShip.AppUser.MiddleName @Model.TechearMemberShip.AppUser.LastName</label>
                    </div>
                </div>
                <div class="mb-3">
                    <label class="fw-bold" asp-for="@Model.TechearMemberShip.EducationLevel"></label>
                    
                   <div>
                        @Model.TechearMemberShip.EducationLevel_String
                   </div>
                </div>
                <div class="mb-3">
                    <label class="fw-bold" asp-for="@Model.TechearMemberShip.SocialMediaAccounts"></label>
                    <div>
                        @Model.TechearMemberShip.SocialMediaAccounts
                    </div>
                </div>
                <div class="mb-3">
                    <label class="fw-bold" asp-for="@Model.TechearMemberShip.PersonalWebSite"></label>
                    <div>
                        @Model.TechearMemberShip.PersonalWebSite
                    </div>
                </div>
                <div class="mb-3">
                    <label class="fw-bold" asp-for="TeachingType"></label>
                    
                    <div>
                        @Model.TeachingType_string
                    </div>
                </div>
                
            </div>
            <div class="tab-pane fade" id="profile">
                <div class="mb-3">
                    <label class="fw-bold" asp-for="@Model.City_String"></label>
                    <div>
                        @Model.City_String
                    </div>
                </div>
                <div class="mb-3">
                    <label class="fw-bold" asp-for="@Model.TechearMemberShip.ExpYears"></label>
                    <div>
                        @Model.TechearMemberShip.ExpYears
                    </div>
                </div>
                <div class="mb-3">
                    <label class="fw-bold" asp-for="@Model.AccreditedHours"></label>
                    <div>
                        @Model.AccreditedHours
                    </div>
                </div>
                <div class="mb-3">
                    <label class="fw-bold" asp-for="@Model.TechearMemberShip.SchoolLocation"></label>
                    <div>
                        @Model.SchoolLocation
                    </div>
                </div>
                <div class="mb-3">
                    <label class="fw-bold" asp-for="@Model.TechearMemberShip.CertaficateDate"></label>
                    <div>
                        @Model.CertaficateDate
                    </div>
                </div>
                <div class="mb-3">
                    <label class="fw-bold" asp-for="@Model.TechearMemberShip.SchoolName"></label>
                    <div>
                        @Model.SchoolName
                    </div>
                </div>
                <div class="mb-3">
                    <label class="fw-bold" asp-for="@Model.TechearMemberShip.SchoolLink"></label>
                    <div>
                        @Model.SchoolLink
                    </div>
                </div>
                <div class="mb-3">
                    <label class="fw-bold" asp-for="@Model.TechearMemberShip.SchoolSocialMediaAccount"></label>
                    <div>
                        @Model.SchoolSocialMediaAccount
                    </div>
                </div>
                <div class="mb-3">
                    <label class="fw-bold" asp-for="@Model.TechearMemberShip.CertficateFiles"></label>
                    <div>
                        @{
                            if(!string.IsNullOrEmpty(Model.CertficateFiles))
                            {
                                foreach (var item in Model.CertficateFiles.Split(','))
                                {
                                    <div><a target="_blank" href="~/assets/images/@item" alt="CertficateFiles">@item</a></div>    
                                }
                                
                            }
                        }
                        
                    </div>
                </div>
            </div>
            
            <div class="tab-pane fade" id="fees">
                <div class="mb-3">
                    <h1>Exam Fees</h1>
                    @if(!string.IsNullOrEmpty(Model.ReceiptCopy))
                    {
                        @if(!string.IsNullOrEmpty(Model.ReceiptCopy) && Model.PayExamFees == false)
                        {
                            <div class="alert alert-warning">
                                Warning: User send the receit but you not approve yet, so please approve.
                            </div>
                        }
                        <label>Teacher pay the exam fees, check the below receit</label>
                        <div>
                            <img width="600" height="400" src="~/assets/images/@Model.ReceiptCopy"/>
                        </div>
                    }
                    else {
                        <label>Not Paid Yet.</label>
                    }
                </div>
                <div class="mb-3">
                    <h1>Licence Fees</h1>
                    @if(!string.IsNullOrEmpty(Model.ReceiptCopyLic))
                    {
                        @if(!string.IsNullOrEmpty(Model.ReceiptCopyLic) && Model.PayFees == false)
                        {
                            <div class="alert alert-warning">
                                Warning: User send the receit but you not approve yet, so please approve.
                            </div>
                        }
                        <div>Teacher pay the exam fees, check the below receit</div>
                       <div>
                        <img width="600" height="400" src="~/assets/images/@Model.ReceiptCopyLic"/>
                       </div>
                    }
                    else {
                        <label>Not Paid Yet.</label>
                    }
                </div>
            </div>
            <div class="tab-pane fade" id="status">
                
                    <table class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <th>Information Completed</th>
                                <th>Pay Exam Fees</th>
                                <th>Take The Exam</th>
                                <th>Pass The Exam</th>
                                <th>Pay Licence Fees</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    @if(Model.Status == (int)StatusEnum.Pending)
                                    {
                                            <div>
                                                <span class="text-info fw-bold text-capitalize">Pending,</span> 
                                                <div>
                                                    <select name="Info" id="Info">
                                                        <option value="0">Select</option>
                                                        <option value="1">Mark as approved</option>
                                                        <option value="2">Mark as Rejected</option>
                                                    </select>
                                                </div>
                                            </div>
                                            
                                            
                                    }
                                    else if(Model.Status == (int)StatusEnum.Approved) {
                                            <div>
                                                <span class="text-success fw-bold text-capitalize">Approved,</span>
                                            </div>
                                    }
                                    else if(Model.Status == (int)StatusEnum.Rejected) {
                                            <div>
                                                <span class="text-danger fw-bold text-capitalize">Rejected,</span>
                                            </div>
                                            <div>
                                                <select name="Info" id="Info">
                                                    <option value="0">Select</option>
                                                    <option value="1">Mark as approved</option>
                                                    
                                                </select>
                                            </div>
                                    }
                                </td>
                                <td>
                                    @if(Model.PayExamFees == false)
                                    {
                                            <div>
                                                <span class="text-danger">No</span>
                                            </div>
                                            <div>
                                                <select name="PayExamFees" id="PayExamFees">
                                                    <option value="0">Select</option>
                                                    <option value="1">Mark as paid exam fees</option>
                                                    <option value="2">Reject Payment</option>
                                                </select>
                                            </div>
                                            <span class="fw-bold text-capitalize">Details</span> 
                                            <div>
                                                <textarea placeholder="Exam Details (Location And Date)" name="ExamLocation" id="" cols="30" rows="3"></textarea>
                                            </div>
                                    }
                                    else {
                                            <div>
                                                <span class="text-success">Yes</span>
                                            </div>
                                    }
                                </td>
                                
                                <td>
                                    @if(Model.TakeExam == false)
                                    {
                                            <div>
                                                <span class="text-danger">No</span>
                                            </div>
                                                <div>
                                                    <select name="TakeExam" id="TakeExam">
                                                        <option value="0">Select</option>
                                                        <option value="1">Mark as take the exam</option>
                                                    </select>
                                                </div>
                                    }
                                    else {
                                            <div>
                                                <span class="text-success">Yes</span>
                                            </div>
                                    }
                                </td>
                                <td>
                                    @if(Model.PassExam == false)
                                    {
                                            <div>
                                                <span class="text-danger">No</span>
                                            </div>
                                                <div>
                                                    <select name="PassExam" id="PassExam">
                                                        <option value="0">Select</option>
                                                        <option value="1">Mark as pass the exam</option>
                                                        <option value="2">Not Passed</option>
                                                    </select>
                                                </div>
                                                <span class="fw-bold text-capitalize">License Fees</span>
                                                <div>
                                                    <input placeholder="Please Insert License Fees" class="form-control" type="number" name="LicFeesPrice">
                                                </div>
                                    }
                                    else {
                                            <div>
                                                <span class="text-success">Yes</span>
                                            </div>
                                    }
                                </td>
                                <td>
                                    @if(Model.PayFees == false)
                                    {
                                            <div>
                                                <span class="text-danger">No</span>
                                            </div>
                                            <div>
                                                <select name="PayLicFees" id="PayLicFees">
                                                    <option value="0">Select</option>
                                                    <option value="1">Mark as paid License fees</option>
                                                    <option value="2">Reject Payment</option>
                                                </select>
                                            </div>
                                    }
                                    else {
                                            <div>
                                                <span class="text-success">Yes</span>
                                            </div>
                                    }
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    
                    @if(Model.FinalApprove == false)
                    {
                        <div class="mb-3">
                            <button type="submit" value="Approve" name="Approve" class="btn btn-primary">Approve</button>
                        </div>
                    }

                    @if(Model.FinalApprove == false && Model.Status != (int)StatusEnum.Rejected)
                    {
                        <div class="mb-3">
                        <div>
                            <label class="fw-bold" for="reason">Reject Reason</label>
                            <div>
                                <textarea name="reason" id="reason" cols="30" rows="3"></textarea>
                            </div>
                        </div>
                        <button type="submit" value="Reject" name="Reject" class="btn btn-danger">Reject</button>
                    </div>
                    }
                </div>
                
            </div>
            <div>
                @if(@Model.Status == 0)
                {
                    <input type="checkbox"> <span class="fw-bold" >Agree on Terms and Conditions and Acknowledged</span>
                }
            </div>

            
</form>            
        </div>
    </div>

</div>



@section Scripts{
    @{
        <partial name="_ValidationScriptsPartial"/>
    }
}